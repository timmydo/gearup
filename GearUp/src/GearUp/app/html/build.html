

<div class="row">

	<div class="col-xs-8 col-md-8">

		{{#if editTitle}}
		<div class="input-group">
			{{input type="text" class="form-control" placeholder="Enter title" value=title size="50"}}
			<span class="input-group-btn">
				<button class="btn btn-default" type="button" {{action 'saveTitle' on="click"}}>Save</button>
				<button class="btn btn-default" type="button" {{action 'discardTitle' on="click"}}>Discard</button>
			</span>
		</div>
		{{else}}
		<h1>
			<span {{action 'startEditTitle' on="click"}} title="Click to change">{{title}}</span>
		</h1>
		{{/if}}

	</div>
	<div class="col-xs-4 col-md-4 text-right">

		{{#if userLoginKey}}
		<div class="btn-group">
			<button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
				Add to list <span class="caret"></span>
			</button>
			<ul class="dropdown-menu" role="menu">
				{{#each buildList in userBuildList}}
				<li><a class="clickable" {{action 'addBuildToList' buildList.id}}>{{buildList.title}}</a></li>

				{{/each}}
			</ul>
		</div>
		{{/if}}

		{{#if canEditBuild}}


		{{#if tryDelete}}
		<button class="btn btn-default" {{action 'deleteBuild'}}><i class="fa fa-trash-o"></i> Really Delete?</button>
		{{/if}}
		<button class="btn btn-default" {{action 'tryDeleteBuild'}}><i class="fa fa-trash-o"></i></button>

		{{/if}}
	</div>

</div>

<div class="row">

	<div class="col-xs-12 col-md-8">
		{{#drag-drop dropped="uploadFile" guid=id}}
		{{#unless model.images}}
		{{#if canEditBuild}}
		Drag and drop images here...
		{{/if}}
		{{else}}
		<div class="build-image-main">{{buildImage selectedImage}}</div>
		{{/unless}}
		{{/drag-drop}}

		{{#if progressBars}}
		<div class="panel panel-default">
			<div class="panel-heading">Upload Progress</div>
			<div class="panel-body">
				{{#each pb in progressBars}}
				<div class="progress">
					<div class="progress-bar progress-bar-striped active" role="progressbar" aria-valuenow="{{unbound pb.progress}}" aria-valuemin="0" aria-valuemax="100" style="width: {{unbound pb.progress}}%">
						<span>{{pb.name}} &ndash; {{pb.progress}}%</span>
					</div>
				</div>
				{{/each}}
			</div>
		</div>
		{{/if}}

		{{#each image in model.images}}
		<div class="build-image-thumbnail" {{action 'selectImage' image.guid}}>{{buildThumbnail image.guid}}</div>
		{{/each}}
	</div>


	<div class="col-xs-6 col-md-4">

		<table class="table table-striped">
			<thead>
				<tr>
					<th>
						{{#if canEditBuild}}
						<i class="fa fa-plus clickable" title="Add a part" {{action 'addPart'}}></i>
						{{/if}}
					</th>
					<th>Item</th>
					<th>Price</th>
				</tr>
			</thead>

			<tbody>
				{{#each part in model.parts itemController="part"}}
				<tr>
					
					{{#if part.editing}}
					<td>
						<i class="fa fa-check clickable" {{action 'savePart' part}}></i>
						<i class="fa fa-times clickable" {{action 'discardPart' part}}></i>
						<br /><br />
						<i class="fa fa-trash-o clickable" {{action 'deletePart' part}}></i>
					</td>

					<td colspan="2">
						<div class="form-group">
							<label>Item name</label>
							{{input type="text" class="form-control" placeholder="Enter name" value=part.newTitle size="50"}}
						</div>
						<div class="form-group">
							<label>Link to item</label>
							{{input type="text" class="form-control" placeholder="http://" value=part.newUrl size="500"}}
						</div>
						<div class="form-group">
							<label>Price</label>
							{{input type="text" class="form-control" placeholder="price" value=part.newPrice size="15"}}
						</div>
					</td>
					{{else}}
					<td>
						{{#if canEditBuild}}
						<i class="fa fa-pencil clickable" {{action 'editPart' part}}></i>
						{{/if}}
					</td>

					<td>
						{{#if part.url}}
						<a target="_blank" {{bind-attr href=part.url}}>{{part.title}}</a>
						{{else}}
						{{part.title}}
						{{/if}}

					</td>
					<td>{{part.price}}</td>

					{{/if}}
				</tr>
				{{/each}}
			</tbody>
		</table>

	</div>


</div>



